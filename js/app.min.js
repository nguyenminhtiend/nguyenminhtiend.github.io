!function(){"use strict";function e(e){e.when("/",{redirectTo:"/customers"}).when("/joblist",{redirectTo:"/jobList"}).otherwise({redirectTo:"/"})}function t(e,t,n,o){var i=o.getCurrentUser();i?e.currentUser=i:n.path("/login"),e.$on("$locationChangeStart",function(e,i,r){var a=n.path(),l=t.routes[a];if(l&&l.authorize)return o.isAuthenticated()?void(o.isAuthorized(l.authorize)||n.path("/login")):void n.path("/login")}),e.$on("$routeChangeSuccess",function(){t.current&&(e.hideHeader=t.current.hideHeader,e.category=t.current.category),t.current.title?document.title="ST Logistics - "+t.current.title:document.title="ST Logistics"})}function n(e){e.interceptors.push("httpInterceptor")}angular.module("main.module",["ngRoute","ngAnimate","ui.bootstrap","LocalStorageModule","ui.bootstrap.datetimepicker","toastr","ngTouch","ngSanitize","angularjs-dropdown-multiselect","hljs","customer.module","spAdminUser.module","adminUser.module","account.module","jobList.module","milkRun.module","log.module"]).config(n).config(e).run(t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$route","$location","authService"],n.$inject=["$httpProvider"]}(),function(){"use strict";angular.module("main.module").constant("systemSetting",{serviceUrl:"http://ec2-52-77-214-252.ap-southeast-1.compute.amazonaws.com"}).constant("systemRole",{SuperAdmin:"SuperAdmin",Admin:"Admin",User:"User"}).constant("setItemPerPage",[{value:10,text:"10 entities"},{value:20,text:"20 entities"},{value:50,text:"50 entities"},{value:100,text:"100 entities"}]).constant("pageName",{ADHOC_TRANSACTIONS:"AdhocTransactions",MILKRUN_TRANSACTIONS:"MilkrunTransactions",USERS:"Users",CLIENTS:"Customers",JOBTYPES:"Jobtypes",LOCATIONS:"Locations",REPORTS:"Reports",LOGS:"Logs"}).constant("departments",{PSS:{id:1,name:"PSS"},Healthcare:{id:2,name:"Healthcare"}}).constant("pricingType",{Adhoc:0,AdhocExpres:1,MilkRun:2}).constant("weightCategory",{ThreeKg:0,FourKg:1,FiveKg:2,TenKg:3,TwentyKg:4,Extra:5}).constant("milkRunTypes",{none:0,oneToOne:1,oneToMany:2,manyToOne:3}).constant("milkRunFrequency",{daily:{value:0,display:"Daily"},twiceADay:{value:1,display:"Twice a day"},weekly:{value:2,display:"Weekly"}}).constant("days",{monday:{text:"M",value:1,display:"Monday"},tuesday:{text:"T",value:2,display:"Tuesday"},wednesday:{text:"W",value:3,display:"Wednesday"},thursday:{text:"T",value:4,display:"Thursday"},friday:{text:"F",value:5,display:"Friday"}}).constant("milkRunAdditionals",{saturdays:{value:6,display:"Saturdays"},sundays:{value:0,display:"Sundays"},afterOfficeHours:{value:2,display:"After Office Hours"},publicHolidays:{value:3,display:"Public Holidays"}}).constant("milkRunWeight",{upTo5kg:{id:1,text:"Up to 5kg"},from5To10kg:{id:2,text:"5 - 10kg"},from10To30kg:{id:3,text:"10 - 30kg"},from30To60kg:{id:4,text:"30 - 60kg"},from60To100kg:{id:5,text:"60 - 100kg"}}).constant("milkRunProgress",{chosenMilkRunType:1,collectionPoint:2,deliveryPoint:3,remark:4,confirmOrder:5})}(),function(){"use strict";function e(e){e.when("/customers",{title:"Client Management",category:"Customers",controller:"CustomerController",templateUrl:"app/components/customer/customers.html",controllerAs:"vm",authorize:["SuperAdmin","Admin"]}).when("/customers/create",{title:"Create new client",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:["Admin"]}).when("/customers/detail/:id",{title:"Client detail",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:["SuperAdmin","Admin"]})}function t(e,t,n,o){function i(){r(),a()}function r(){s.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},s.gridConfig={onClickRowDetail:l,columns:[{name:"sapCode",display:"SAP Code",columnNameSort:"sapCode"},{name:"organizationCode",display:"Organization Code",columnNameSort:"organizationCode"},{name:"name",display:"Organization Name",columnNameSort:"name"},{name:"clientType",display:"Client Type",columnNameSort:"departmentId"},{name:"address",display:"Address",columnNameSort:"addressId"}]}}function a(){s.isGridLoading=!0,n.getCustomerByCriteria(s.options,e.currentUser.department).then(function(e){s.options.totalItems=e.data.totalCount,s.customers=n.convertListCustomer(e.data.customers),s.isGridLoading=!1})}function l(e){t.path("/customers/detail/"+e.id)}var s=this;s.systemRole=o,s.getCustomerByCriteria=a,i()}function n(e,t,n,o,i,r,a){function l(){var n=t.id;n?(c.isLoading=!0,i.getCustomerById(n).then(function(e){c.clientDetail=i.convertCustomer(e.data),c.isLoading=!1}),c.viewMode=!0):(c.clientDetail={department:{name:e.currentUser.department},clientTypeId:o[e.currentUser.department].id,users:[],pricings:[],address:{}},c.viewMode=!1)}function s(){c.clientDetail.contractEndDate&&c.clientDetail.cutOffTimeForSameDayPickupAndDelivery&&c.clientDetail.cutOffTimeForSameDayPickupAndNextDayDelivery&&(c.isLoading=!0,i.saveCustomer(c.clientDetail).then(function(e){c.isLoading=!1;var t=c.clientDetail.id?"The client has been updated successfully.":"The client has been created successfully.";r.success(t),n.path("/customers")}))}var c=this;c.systemRole=a,c.pssAdhocPricing={},c.healthCareAdhocPricing={},c.newUser={},c.saveCustomer=s,l()}function o(e){var t=this;t.open=function(){e.success("Hello world!","Toastr fun!")}}angular.module("customer.module",["ngRoute"]).config(e).controller("CustomerController",t).controller("CustomerDetailController",n).controller("ExampleController",o),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$location","customerService","systemRole"],n.$inject=["$rootScope","$routeParams","$location","departments","customerService","toastr","systemRole"],o.$inject=["toastr"]}(),function(){"use strict";function e(e,t,n){function o(){i()}function i(){p.milkRunPricingExist=r(e.MilkRun)>=0,p.adhocPricingExist=r(e.Adhoc)>=0,p.adhocExpresPricingExist=r(e.AdhocExpres)>=0}function r(e){for(var t=0;t<p.listPricing.length;t++)if(p.listPricing[t].pricingType===e)return t;return-1}function a(e,t){if(e.weightCategories&&e.weightCategories.length>0)for(var n=0;n<e.weightCategories.length;n++)if(e.weightCategories[n].category===t)return n;return-1}function l(t){var o,i=r(t);o=i>=0?angular.copy(p.listPricing[i]):{pricingType:t},p.adhocPricingModel=u(o);var a={setPricing:s},l=t===e.MilkRun?"app/components/customer/pricing/milkRunPricingModal.html":"app/components/customer/pricing/adhocPricingModal.html";n.createPopup({templateUrl:l,size:"lg",data:p.adhocPricingModel},a)}function s(){var e=d(p.adhocPricingModel),t=r(e.pricingType);t>=0?p.listPricing[t]=e:p.listPricing.push(e),i()}function c(e,t){if(p[t])p[t]=!1,n.createWarningPopup("Please set pricing for this service first!","Warning",null,!0);else{var o=r(e);o>=0&&p.listPricing.splice(o,1)}}function u(e){var n=angular.copy(e),o={};for(var i in t)o[i]=m(e,t[i]);return n.weightCategories=o,n}function d(e){var t=angular.copy(e),n=[];for(var o in e.weightCategories){var i=e.weightCategories[o];(i.threeHourRate||i.sameDayRate||i.nextDayRate)&&n.push(e.weightCategories[o])}return t.weightCategories=n,t}function m(e,t){var n=a(e,t),o=n>-1?e.weightCategories[n]:{category:t};return o}var p=this;p.listPricing=p.listPricing||[],p.pricingType=e,p.setPricing=l,p.checkSetPricing=c,o()}angular.module("customer.module").directive("customerPricing",function(){return{restrict:"E",scope:{viewMode:"=",listPricing:"="},templateUrl:"app/components/customer/pricing/customerPricing.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["pricingType","weightCategory","modalService"]}(),function(){"use strict";function e(e){function t(){o.newUser={workAddress:{},billingAddresses:[{}]};var t={onCreateOrUpdate:n};e.createPopup({templateUrl:"app/components/customer/user/userDetail.html",size:"lg",data:o.newUser},t)}function n(){o.listUser.push(o.newUser)}var o=this;o.addNewUser=t,o.listUser=o.listUser||[]}angular.module("customer.module").directive("customerUser",function(){return{restrict:"E",scope:{viewMode:"=",listUser:"=",orgCode:"@"},templateUrl:"app/components/customer/user/customerUser.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["modalService"]}(),function(){"use strict";function e(e){e.when("/users",{title:"User management",category:"Users",controller:"SpAdminUserController",templateUrl:"app/components/spAdminUser/users.html",controllerAs:"vm",authorize:["SuperAdmin"]}).when("/users/create",{title:"New admin",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:["SuperAdmin"]}).when("/users/detail/:id",{title:"Admin detail",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:["SuperAdmin"]})}function t(e,t){function n(){o(),i()}function o(){a.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},a.gridConfig={onClickRowDetail:r,columns:[{name:"name",display:"Name",columnNameSort:"firstName"},{name:"email",display:"Email",columnNameSort:"email"},{name:"phoneNumber",display:"Contact number",columnNameSort:"phoneNumber"},{name:"departmentName",display:"Department",columnNameSort:"department"}]}}function i(){a.isGridLoading=!0,t.getAdminUserByCriteria(a.options).then(function(e){a.options.totalItems=e.data.totalCount;var t=e.data.users;angular.forEach(t,function(e){e.name=e.firstName+" "+e.lastName,e.departmentName=e.department.name}),a.users=t,a.isGridLoading=!1})}function r(t){e.path("/users/detail/"+t.id)}var a=this;a.getAdminUserByCriteria=i,n()}function n(e,t,n,o,i,r){function a(){var t=e.id;t?(n.getAdminUserById(t).then(function(e){m.userDetail=e.data,m.isActive=m.userDetail.lockoutEnabled}),m.viewMode=!0):m.viewMode=!1}function l(){m.viewMode=!1}function s(){m.isSaving=!0,n.saveAdminUser(m.userDetail).then(function(e){m.isSaving=!1;var n=m.userDetail.id?"The admin has been updated successfully.":"The admin has been created successfully.";i.success(n),t.path("/users")},function(e){m.isSaving=!1})}function c(){var e=m.userDetail.lockoutEnabled?"Are you sure you want to activate this admin?":"Are you sure you want to deactivate this admin?";r.createWarningPopup(e,"Warning",u)}function u(){n.activateOrDeactivate(m.userDetail).then(function(e){var t=m.userDetail.lockoutEnabled?"The admin has been activated successfully.":"The admin has been deactivated successfully.";m.userDetail.lockoutEnabled=!m.userDetail.lockoutEnabled,i.success(t)})}function d(){n.checkEmailExist(m.userDetail.email).then(function(e){m.emailExist=!0},function(e){m.emailExist=!1})}var m=this;m.departments=o,m.edit=l,m.save=s,m.activateOrDeactivate=c,m.checkEmailExist=d,a()}angular.module("spAdminUser.module",["ngRoute"]).config(e).controller("SpAdminUserController",t).controller("SpAdminUserDetailController",n),e.$inject=["$routeProvider"],t.$inject=["$location","adminUserService"],n.$inject=["$routeParams","$location","adminUserService","departments","toastr","modalService"]}(),function(){"use strict";function e(e){e.when("/login",{title:"Login",controller:"AccountController",templateUrl:"app/components/account/login.html",controllerAs:"vm",hideHeader:!0}).when("/account/forgot",{title:"Forgot password",controller:"AccountController",templateUrl:"app/components/account/forgot.html",controllerAs:"vm",hideHeader:!0}).when("/account/activate",{title:"Activate account",controller:"AccountController",templateUrl:"app/components/account/activate.html",controllerAs:"vm",hideHeader:!0})}function t(e,t,n,o){function i(){return s.email&&s.password?(s.isLoginInProgress=!0,void t.login(s.email,s.password).then(function(e){s.isLoginInProgress=!1,l(e)},function(){s.password="",s.isLoginInProgress=!1,s.wrongPassword=!0})):void(s.wrongPassword=!0)}function r(){n.path("/login")}function a(){s.isSentResetPassword=!0}function l(t){e.currentUser=t,t.role===o.User?n.path("/clientUsers"):n.path("/customers")}var s=this;s.login=i,s.activateAccount=r,s.resetPassword=a}angular.module("account.module",["ngRoute"]).config(e).controller("AccountController",t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","authService","$location","systemRole"]}(),function(){"use strict";function e(e){e.when("/jobList",{title:"jobList",controller:"JobListController",templateUrl:"app/components/jobList/jobList.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/jobList/create",{title:"New Adhoc job",category:"Adhoc",controller:"JobAdhocNewController",templateUrl:"app/components/jobList/jobAdhocNew.html",controllerAs:"vm",authorize:"Admin"})}function t(e,t){function n(){m.fromDate=new Date,m.toDate=new Date,m.requestButton="All",m.statusButton="All",m.customerButton="All",r(),l(),c(),d("Adhoc"),o()}function o(){m.gridConfig={columnIdentity:"id",navigationDetail:"/jobList/jobAdhocNew.html/",columns:[{name:"collectionBarcode",display:"Collection barcode",id:1},{name:"customer",display:"Customer",id:2},{name:"createdDate",display:"Created date",id:3},{name:"requestType",display:"Request type",id:4},{name:"reqStatus",display:"Req status",id:5},{name:"status",display:"Status",id:6},{name:"pickupPoint",display:"Pick up point",id:7},{name:"deliveryPoint",display:"Delivery point",id:8}]},i()}function i(){m.isGridLoading=!0,e(function(){m.data=[],m.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20,totalItems:10};for(var e=0;e<100;e++)m.data.push({collectionBarcode:"C543645E411NE",customer:"ICA-Costal Command",createdDate:"27/01/2016 08:09:03",requestType:"Normal Service",reqStatus:"Waiting",status:"N/A",pickupPoint:"10 Brani Way Singapore",deliveryPoint:"31 Marina Coastal Drive Singapore 175384"});m.optionsGrid.totalItems=100,m.isGridLoading=!1},2e3)}function r(){m.requestTypes=["All","Normal service 1","Normal service 2","Normal service 3"]}function a(e){m.requestButton=e}function l(){m.statusList=["All","Picking up","Collected","N/A"]}function s(e){m.statusButton=e}function c(){m.customerList=["All","ICA-Costal Command 1","ICA-Costal Command 2","ICA-Costal Command 3"]}function u(e){m.customerButton=e}function d(e){"Adhoc"===e?(m.modelClassAdhoc="btn btn-default btn-block btn-action active",m.modelClassMilkRun="btn btn-default btn-block btn-additional"):(m.modelClassAdhoc="btn btn-default btn-block btn-additional",m.modelClassMilkRun="btn btn-default btn-block btn-action active")}var m=this;m.getTransactionByCriteria=i,m.requestTypes=[],m.getRequestTypes=r,m.changeRequest=a,m.statusList=[],m.getStatusList=l,m.changeStatus=s,m.customerList=[],m.getCustomerList=c,m.changeCustomer=u,m.getTransactions=d,n()}function n(e,t,n){function o(){d.viewMode=!0,d.totalChargeAmount=0;var e=new Date;d.dateRequest=e.toLocaleDateString()}function i(){var e={addNewItem:r};n.createPopup({templateUrl:"app/components/jobList/jobAdhocNewItem.html",size:"lg",data:d.itemDetail},e)}function r(){var e=0;e=null!==d.itemList&&d.itemList.length>0?parseInt(d.itemList.length)+1:1,d.itemList.push({no:e,itemDescription:d.itemDetail.itemDescription,uom:d.itemDetail.uom,unitMass:d.itemDetail.unitMass,unitVol:d.itemDetail.unitVol,issueQty:d.itemDetail.issueQty,remark:d.itemDetail.remark}),d.itemDetail={}}function a(){var e={addAdditionalCharge:l};n.createPopup({templateUrl:"app/components/jobList/jobAdhocAdtnCharge.html",size:"lg",data:d.chargeDetail},e)}function l(){d.chargeList.push({description:d.chargeDetail.description,price:d.chargeDetail.price}),d.totalChargeAmount=s(),d.chargeDetail={}}function s(){for(var e=0,t=0,n=d.chargeList.length;t<n;t++)e+=parseFloat(d.chargeList[t].price);return e}function c(){var e={viewPricing:u};n.createPopup({templateUrl:"app/components/jobList/jobAdhocPricingView.html",size:"lg",data:d.adhocPriceDetail},e)}function u(){}var d=this;d.itemDetail={},d.chargeDetail={},d.dateRequest={},d.itemList=[],d.chargeList=[],d.addNewItem=i,d.addAdditionalCharge=a,d.viewPricing=c,o()}angular.module("jobList.module",["ngRoute"]).config(e).controller("JobListController",t).controller("JobAdhocNewController",n),e.$inject=["$routeProvider"],t.$inject=["$timeout","$uibModal"],n.$inject=["$timeout","$uibModal","modalService"]}(),function(){"use strict";function e(e){e.when("/clientUsers",{title:"User Client management",category:"Users",controller:"AdminUserController",templateUrl:"app/components/adminUser/clientUsers.html",controllerAs:"vm",authorize:["Admin","User"]})}function t(e,t,n,o){function i(){r(),a()}function r(){m.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},m.gridConfig={onClickRowDetail:c,columns:[{name:"name",display:"Name",css:"col-md-2",columnNameSort:"firstName"},{name:"email",display:"Email",css:"col-md-2",columnNameSort:"email"},{name:"phoneNumber",display:"Contact no",css:"column-user-phoneNumer",columnNameSort:"phoneNumber"},{name:"workAddress",display:"Office address",css:"col-md-2",columnNameSort:"workAddress"},{name:"billingAddresses",display:"Billing address",css:"col-md-2",columnNameSort:"billingAddresses"},{name:"organizationCode",display:"Org code",css:"column-user-orgCode",columnNameSort:"organizationCode"},{name:"costCentre",display:"Cost centre",css:"column-user-costCentre",columnNameSort:"costCentre"}]}}function a(){m.isGridLoading=!0,n.getClientUserByCriteria(m.options,e.currentUser.department).then(function(e){m.options.totalItems=e.data.totalCount,m.users=n.convertListUser(e.data.users),m.isGridLoading=!1})}function l(){m.userDetail={};var e={addNewUser:s};u(e)}function s(){m.data.push({name:m.userDetail.firstName+" "+m.userDetail.lastName,email:m.userDetail.email,contactNo:m.userDetail.mobileNumber,officeAddress:m.userDetail.workAddress.postalCode+" "+m.userDetail.workAddress.blockNumber+" "+m.userDetail.workAddress.streetName+" "+m.userDetail.workAddress.unitNumber,billingAddress:m.userDetail.billingAddress.postalCode+" "+m.userDetail.billingAddress.blockNumber+" "+m.userDetail.billingAddress.streetName+" "+m.userDetail.billingAddress.unitNumber,orgCode:"ICA",costCentre:m.userDetail.costCenter})}function c(e){n.getClientUserById(e.id).then(function(e){m.userDetail=e.data;var t={onCreateOrUpdate:d};u(t)})}function u(e){t.createPopup({templateUrl:"app/components/customer/user/userDetail.html",size:"lg",data:m.userDetail},e)}function d(){m.isGridLoading=!0,n.updateClientUser(m.userDetail).then(function(e){o.success("The user has been updated successfully."),a()})}var m=this;m.userDetail={},m.getUserByCriteria=a,m.addNewUser=l,i()}angular.module("adminUser.module",["ngRoute"]).config(e).controller("AdminUserController",t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","modalService","clientUserService","toastr"]}(),function(){"use strict";function e(e){e.when("/milkruns",{title:"Milkrun transactions",category:"MilkrunTransactions",controller:"MilkrunManagementController",templateUrl:"app/components/milkrun/milkrunManagement.html",controllerAs:"vm",authorize:["SuperAdmin","Admin","User"]}).when("/milkrun/create",{title:"Create new milkrun",category:"MilkrunTransactions",controller:"MilkRunDetailController",templateUrl:"app/components/milkrun/detail.html",controllerAs:"vm",authorize:["SuperAdmin","Admin","User"]}).when("/milkrun/detail/:id",{title:"Milkrun detail",category:"MilkrunTransactions",controller:"MilkRunDetailController",templateUrl:"app/components/milkrun/detail.html",controllerAs:"vm",authorize:["SuperAdmin","Admin","User"]})}function t(e,t){function n(){o(),i()}function o(){a.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},a.gridConfig={onClickRowDetail:r,columns:[{name:"barcode",display:"Barcode",columnNameSort:"barcode",css:"col-md-1"},{name:"customer",display:"Customer",columnNameSort:"customer",css:"col-md-2"},{name:"pickupPoint",display:"Pick up point",columnNameSort:"pickUpPoint",htmlDisplay:!0,css:"col-md-2"},{name:"deliveryPoint",display:"Delivery Point",columnNameSort:"deliveryPoint",css:"col-md-2"},{name:"frequency",display:"Frequency",columnNameSort:"frequency",css:"col-md-2"},{name:"items",display:"Items",columnNameSort:"items",css:"col-md-2"},{name:"status",display:"Status",columnNameSort:"status",css:"col-md-1"}]}}function i(){a.isGridLoading=!0,t.getMilkRunByCriteria(a.options).then(function(e){a.listMilkRun=t.convertListMilkRun(e.data.milkRuns),a.options.totalItems=e.data.totalCount,a.isGridLoading=!1})}function r(t){e.path("/users/detail/"+t.id)}var a=this;a.getMilkRunByCriteria=i,n()}function n(e,t,n){var o=this;o.systemRole=n,o.milkRunProgress=t;var i=e.id;i?(o.viewMode=!0,o.currentProgress=t.confirmOrder,o.milkrunDetail={id:i,clientId:1,clientName:"Tien Nguyen",requesterId:"3b37b430-a3fb-4a08-8f77-d9d00237c6ac",requester:"Nguyen Minh Tien",costCenter:"ABC",requestDate:new Date,milkRunType:2,milkRunFrequency:1,days:[2,4],additionals:[0],collectionPoints:[{name:"Lionel Messi",contactNumber:"526262623623",address:{postalCode:"3525",blockNumber:"35",streetName:"ABC Road",unitNumber:"#6236"}}],deliveryPoints:[{name:"Lionel Messi",contactNumber:"526262623623",address:{postalCode:"3525",blockNumber:"35",streetName:"ABC Road",unitNumber:"#6236"},items:[{quantity:2,milkRunWeightId:3}]}],remarks:"There's something here",cost:200}):(o.viewMode=!1,o.milkrunDetail={},o.currentProgress=t.chosenMilkRunType)}angular.module("milkRun.module",["ngRoute"]).config(e).controller("MilkrunManagementController",t).controller("MilkRunDetailController",n),e.$inject=["$routeProvider"],t.$inject=["$location","milkrunService"],n.$inject=["$routeParams","milkRunProgress","systemRole"]}(),function(){"use strict";function e(e){e.when("/logs",{title:"Logs management",category:"Logs",controller:"LogController",templateUrl:"app/components/log/logs.html",controllerAs:"vm",authorize:["SuperAdmin","Admin"]})}function t(e,t){function n(){o(),i()}function o(){r.options={itemPerPage:20,currentPage:1,startDate:"",endDate:"",role:"All",action:"All"},r.roles=[{text:"All",value:"All"},{text:"Super Admin",value:"SuperAdmin"},{text:"Admin",value:"Admin"},{text:"Customer",value:"Customer"}],r.actions=[{text:"All",value:"All"},{text:"Add",value:"Add"},{text:"Edit",value:"Edit"},{text:"Delete",value:"Delete"},{text:"Cancel",value:"Cancel"},{text:"Approve",value:"Approve"},{text:"Reject",value:"Reject"}]}function i(){r.isLoading=!0,e(function(){r.listLog=[];for(var e=0;e<10;e++)r.listLog.push({id:e,date:"20/11/2016 12:12",name:"Tien Nguyen",email:"nguyenminhtiend@gmail.com",role:"Super Admin",action:"Create",description:"PSS Admin Sebastien Shen for customer SGH user Jown Tam"});r.options.totalItems=175,r.isLoading=!1},1e3)}var r=this;r.setItemPerPage=t,n()}angular.module("log.module",["ngRoute"]).config(e).controller("LogController",t),e.$inject=["$routeProvider"],t.$inject=["$timeout","setItemPerPage"]}(),function(){"use strict";function e(e,t,n,o){function i(){return!!s()}function r(e){var t=s();return!!(t&&e.indexOf(t.role)>-1)}function a(i,r){var a=t.defer(),l=o.serviceUrl+"/api/account/token",s={username:i,password:r};return e.post(l,s).then(function(e){var t={access_token:e.data.accessToken,token_type:e.data.tokenType},o={id:e.data.id,email:e.data.email,role:e.data.role,department:e.data.department};n.set("tokenInfo",t),n.set("userInfo",o),a.resolve(o)},function(e){a.reject()}),a.promise}function l(){n.remove("tokenInfo"),n.remove("userInfo")}function s(){return n.get("userInfo")}var c={isAuthenticated:i,isAuthorized:r,login:a,logout:l,getCurrentUser:s};return c}angular.module("main.module").factory("authService",e),e.$inject=["$http","$q","localStorageService","systemSetting"]}(),function(){"use strict";function e(e){function t(t,n,o){var i=e.open({animation:!0,templateUrl:t.templateUrl,controller:"ModalInstanceCtrl",controllerAs:"vm",size:t.size,backdrop:"static",resolve:{data:function(){return t.data}}});i.result.then(function(e){n[e]()},o)}function n(t,n,o,i){var r=e.open({animation:!0,templateUrl:"app/directives/commonControls/warningModal/warningModal.html",controller:"ModalInstanceCtrl",controllerAs:"vm",backdrop:"static",resolve:{data:function(){return{message:t,title:n,isHideActionButton:i}}}});r.result.then(function(e){o&&o()})}var o={createPopup:t,createWarningPopup:n};return o}angular.module("main.module").factory("modalService",e),e.$inject=["$uibModal"]}(),function(){"use strict";function e(e,t,n){function o(e){e.headers=e.headers||{};var n=t.get("tokenInfo");return n&&(e.headers.Authorization=n.token_type+" "+n.access_token),e}function i(o){return 401===o.status&&(t.remove("tokenInfo"),t.remove("userInfo"),n.path("/login")),e.reject(o)}var r={request:o,responseError:i};return r}angular.module("main.module").factory("httpInterceptor",e),e.$inject=["$q","localStorageService","$location"]}(),function(){"use strict";function e(e,t,n){function o(t){return t.id?e.put(s+t.id,t):e.post(s,t)}function i(t){var n=s+"?offset="+(t.currentPage-1)*t.itemPerPage;return n+="&limit="+t.itemPerPage,t.searchTerm&&(n+="&search="+t.searchTerm),t.sortColumn&&(n+="&sortBy="+t.sortColumn,n+="&ascending="+t.sortAscending),e.get(n)}function r(t){return e.get(s+t)}function a(t){var n=t.lockoutEnabled?"activate/":"deactivate/";return e.post(s+n+t.id)}function l(t){return e.post(s+"userExists",{email:t})}var s=n.serviceUrl+"/api/adminusers/",c={saveAdminUser:o,getAdminUserByCriteria:i,getAdminUserById:r,activateOrDeactivate:a,checkEmailExist:l};return c}angular.module("main.module").factory("adminUserService",e),e.$inject=["$http","$q","systemSetting"]}(),function(){"use strict";function e(e,t){function n(t,n){var o=l+"?offset="+(t.currentPage-1)*t.itemPerPage;return o+="&limit="+t.itemPerPage,t.searchTerm&&(o+="&search="+t.searchTerm),n&&(o+="&department="+n),t.sortColumn&&(o+="&sortBy="+t.sortColumn,o+="&ascending="+t.sortAscending),e.get(o)}function o(t){return e.get(l+t)}function i(t){return t.id?e.put(l+t.id,t):e.post(l,t)}function r(e){var t=[];return angular.forEach(e,function(e){t.push({id:e.id,sapCode:e.sapCode,organizationCode:e.organizationCode,name:e.name,clientType:e.department.name,address:e.address?e.address.postalCode+" "+e.address.blockNumber+" "+e.address.streetName+" "+e.address.unitNumber:""})}),t}function a(e){var t={id:e.id,name:e.name,organizationCode:e.organizationCode,sapCode:e.sapCode,contactPerson:e.contactPerson,contactNumber:e.contactNumber,contractEndDate:new Date(e.contractEndDate),cutOffTimeForSameDayPickupAndDelivery:new Date(e.cutOffTimeForSameDayPickupAndDelivery),cutOffTimeForSameDayPickupAndNextDayDelivery:new Date(e.cutOffTimeForSameDayPickupAndNextDayDelivery),address:e.address,department:e.department,clientTypeId:e.department.id,users:e.applicationUsers,pricings:e.pricings};return t}var l=t.serviceUrl+"/api/customers/",s={getCustomerByCriteria:n,getCustomerById:o,saveCustomer:i,convertListCustomer:r,convertCustomer:a};return s}angular.module("main.module").factory("customerService",e),e.$inject=["$http","systemSetting"]}(),function(){"use strict";function e(e,t){function n(t){var n=l+"?offset="+(t.currentPage-1)*t.itemPerPage;return n+="&limit="+t.itemPerPage,t.searchTerm&&(n+="&search="+t.searchTerm),t.sortColumn&&(n+="&sortBy="+t.sortColumn,n+="&ascending="+t.sortAscending),e.get(n)}function o(t){return e.get(l+t)}function i(t){return e.put(l+t.id,t)}function r(e){var t=[];return angular.forEach(e,function(e){t.push({id:e.id,name:e.firstName+" "+e.lastName,email:e.email,phoneNumber:e.phoneNumber,costCentre:e.costCentre,workAddress:e.workAddress?e.workAddress.postalCode+" "+e.workAddress.blockNumber+" "+e.workAddress.streetName+" "+e.workAddress.unitNumber:"",billingAddresses:e.billingAddresses&&e.billingAddresses[0]?e.billingAddresses[0].postalCode+" "+e.billingAddresses[0].blockNumber+" "+e.billingAddresses[0].streetName+" "+e.billingAddresses[0].unitNumber:"",organizationCode:e.organizationCode})}),t}function a(t){return e.post(l+"userExists",{email:t})}var l=t.serviceUrl+"/api/users/",s={getClientUserByCriteria:n,getClientUserById:o,convertListUser:r,updateClientUser:i,checkEmailExist:a};return s}angular.module("main.module").factory("clientUserService",e),e.$inject=["$http","systemSetting"]}(),function(){"use strict";function e(e,t){function n(t){return e.get(o+t)}var o=t.serviceUrl+"/api/location/",i={getLocationByPostalCode:n};return i}angular.module("main.module").factory("locationService",e),e.$inject=["$http","systemSetting"]}(),function(){"use strict";function e(e,t,n,o,i,r){function a(t){var n=d+"?offset="+(t.currentPage-1)*t.itemPerPage;return n+="&limit="+t.itemPerPage,e.get(n)}function l(t){return e.post(d,t)}function s(e){var t=[];return angular.forEach(e,function(e){t.push({customer:e.customer.organizationCode+" - "+e.customer.name,pickupPoint:"",deliveryPoint:"",frequency:c(e),items:e.deliveryPoints&&e.deliveryPoints[0]?u(e.deliveryPoints[0].items):"",status:""})}),t}function c(e){var t="";for(var r in n)if(n[r].value===e.milkRunFrequency){t+=n[r].display+", ";break}var a="";angular.forEach(e.days,function(e){for(var t in o)if(o[t].value===e){a+=o[t].display+", ";break}}),a&&(a=a.substring(0,a.length-2),t+="("+a+")");var l="";return angular.forEach(e.additionals,function(e){for(var t in i)if(i[t].value===e){l+=i[t].display+", ";break}}),l&&(l=l.substring(0,l.length-2),t+=", "+l),t}function u(e){var t="";return angular.forEach(e,function(e){for(var n in r)if(r[n].id===e.milkRunWeight.id){t+=r[n].text+" (x"+e.quantity+"), ";break}}),t&&(t=t.substring(0,t.length-2)),t}var d=t.serviceUrl+"/api/milkrun/",m={getMilkRunByCriteria:a,saveMilkRun:l,convertListMilkRun:s};return m}angular.module("main.module").factory("milkrunService",e),e.$inject=["$http","systemSetting","milkRunFrequency","days","milkRunAdditionals","milkRunWeight"]}(),function(){"use strict";function e(e){function t(){i.showChosenColumn&&(i.isContainColumn=o,i.translationTexts={checkAll:"Show All",dynamicButtonTextSuffix:"columns"},i.chosenColumnConfig={idProp:"name",displayProp:"display",showUncheckAll:!1},i.chosenColumnModel=[],angular.forEach(i.gridConfig.columns,function(e){i.chosenColumnModel.push({id:e.name})}))}function n(e){i.options.sortColumn===e?i.options.sortAscending=!i.options.sortAscending:(i.options.sortAscending=!0,i.options.sortColumn=e),i.actionRequest()}function o(e){var t=!1;return angular.forEach(i.chosenColumnModel,function(n){n.id===e&&(t=!0)}),t}var i=this;i.setItemPerPage=e,i.sort=n,t(),i.eventsChosenColumn={onItemDeselect:function(e){1===i.chosenColumnModel.length&&i.chosenColumnModel.push(e)}}}angular.module("main.module").directive("grid",function(){return{restrict:"E",scope:{gridConfig:"=",options:"=",data:"=",actionRequest:"&",isLoading:"=",showChosenColumn:"=?"},templateUrl:"app/directives/commonControls/grid/grid.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage"]}(),function(){"use strict";function e(e,t){function n(e){s.optionsGrid.sortColumn===e?s.optionsGrid.sortAscending=!s.optionsGrid.sortAscending:(s.optionsGrid.sortAscending=!0,s.optionsGrid.sortColumn=e),s.actionRequest()}function o(e){t.path(s.gridConfig.navigationDetail+e)}function i(e){console.log("select > "+e.id),a(e.id)}function r(e){console.log("deselect : "+e.id),l(e.id)}function a(e){switch(e){case 1:s.column1=!0;break;case 2:s.column2=!0;break;case 3:s.column3=!0;break;case 4:s.column4=!0;break;case 5:s.column5=!0;break;case 6:s.column6=!0;break;case 7:s.column7=!0;break;case 8:s.column8=!0}}function l(e){switch(e){case 1:s.column1=!1;break;case 2:s.column2=!1;break;case 3:s.column3=!1;break;case 4:s.column4=!1;break;case 5:s.column5=!1;break;case 6:s.column6=!1;break;case 7:s.column7=!1;break;case 8:s.column8=!1}}var s=this;s.setItemPerPage=e,s.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20,totalItems:0},s.sort=n,s.navigateToDetail=o,s.columnModel=[],s.columnsData=[{id:1,label:"Collection barcode"},{id:2,label:"Customer"},{id:3,label:"Created date"},{id:4,label:"Request type"},{id:5,label:"Request status"},{id:6,label:"Status"},{id:7,label:"Pick up point"},{id:8,label:"Delivery point"
}],s.defaultText={buttonDefaultText:"Default"},s.column1=!0,s.column2=!0,s.column3=!0,s.column4=!0,s.column5=!0,s.column6=!0,s.column7=!0,s.column8=!0,s.columnModel=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8}],s.eventListeners={onItemSelect:i,onItemDeselect:r}}angular.module("main.module").directive("gridExt",function(){return{restrict:"E",scope:{gridConfig:"=",optionsGrid:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/gridExt/gridExt.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage","$location"]}(),function(){"use strict";function e(e,t){var n=this;n.data=t,n.ok=function(t){e.close(t)},n.cancel=function(){e.dismiss("cancel")}}angular.module("main.module").controller("ModalInstanceCtrl",e),e.$inject=["$uibModalInstance","data"]}(),function(){"use strict";function e(e,t,n,o,i){function r(){n.logout(),e.currentUser=null,t.path("/login")}var a=this;a.pageName=o,a.systemRole=i,a.logout=r}angular.module("main.module").directive("headerPage",function(){return{restrict:"E",templateUrl:"app/directives/header/header.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","$location","authService","pageName","systemRole"]}(),function(){"use strict";angular.module("main.module").directive("compareTo",function(){return{restrict:"A",require:"ngModel",scope:{compareTo:"=compareTo"},link:function(e,t,n,o){t.bind("keyup",function(){e.$apply(function(){var n=t.val(),i=e.compareTo,r=n&&n===i;o.$setValidity("compareTo",r)})})}}})}(),function(){"use strict";function e(e){function t(){n.isOpen=!1,n.minDate&&e.$watch("vm.minDate",function(e){n.datepickerOptions={minDate:e}})}var n=this;t(),n.openCalendar=function(e){e.preventDefault(),e.stopPropagation(),n.isOpen=!0}}angular.module("main.module").directive("customDatePicker",function(){return{restrict:"E",scope:{ngModel:"=",placeHolder:"@?",minDate:"=?"},templateUrl:"app/directives/commonControls/datePicker/datePicker.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$scope"]}(),function(){"use strict";function e(){var e=this;e.timepickerOptions={showMeridian:!1},e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customTimePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/timePicker/timePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(e){function t(){i.userDetail.billingAddresses.push({postalCode:"",blockNumber:"",streetName:"",unitNumber:""})}function n(e){i.userDetail.billingAddresses.splice(e,1)}function o(){e.checkEmailExist(i.userDetail.email).then(function(e){i.emailExist=!0},function(e){i.emailExist=!1})}var i=this;i.addBillingAddress=t,i.deleteBillAddress=n,i.checkEmailExist=o}angular.module("main.module").directive("userClientDetail",function(){return{restrict:"E",scope:{userDetail:"=",onCreateOrUpdate:"&",onCancel:"&"},templateUrl:"app/directives/userClient/userClientDetail.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["clientUserService"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/directives/adhocItem/adhocItemDetail.html",scope:{itemDetail:"=",onCreate:"&",onCancel:"&"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e){function t(){o.itemDetail.unitVol=0,o.itemDetail.width=0,o.itemDetail.height=0,o.itemDetail.depth=0}function n(e,t){o.itemDetail.unitVol=o.itemDetail.width*o.itemDetail.height*o.itemDetail.depth}var o=this;t(),e.$watch("vm.itemDetail.width + vm.itemDetail.height + vm.itemDetail.depth",n)}angular.module("main.module").directive("adhocItemDetail",e),t.$inject=["$scope"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/directives/adhocCharge/adhocChargeDetail.html",scope:{chargeDetail:"=",onCreate:"&",onCancel:"&"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(){function e(){}e()}angular.module("main.module").directive("adhocChargeDetail",e)}(),function(){"use strict";function e(e){function t(){i()}function n(t){return e.getLocationByPostalCode(t).then(function(e){return[{postalCode:e.data.postalCode,blockNumber:e.data.buildingNumber,streetName:e.data.streetName}]})}function o(e){r.ngModel.postalCode=e.postalCode,r.ngModel.blockNumber=e.blockNumber,r.ngModel.streetName=e.streetName}function i(){r.ngModel.postalCode&&r.ngModel.blockNumber&&r.ngModel.streetName&&r.ngModel.unitNumber||r.isDelete?r.isValid=!0:r.isValid=!1}var r=this;r.searchAddressByPostalCode=n,r.onSelect=o,r.checkValidAddress=i,t()}angular.module("main.module").directive("userAddress",function(){return{restrict:"E",scope:{ngModel:"=",isSearchable:"=",isDelete:"=?",isShowFullWidth:"=",onDelete:"&?",isValid:"=?",isShowWarning:"=?",warningMessage:"@?"},templateUrl:"app/directives/userClient/userAddress.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["locationService"]}(),function(){"use strict";function e(e,t,n,o,i,r,a){function l(){v.ngModel.requestDate=v.ngModel.requestDate||new Date,v.ngModel.days=v.ngModel.days||[],v.ngModel.additionals=v.ngModel.additionals||[],d()}function s(e){var t=v.ngModel.days.indexOf(e);t>-1?v.ngModel.days.splice(t,1):v.ngModel.days.push(e),v.weeklyInvalid=0===v.ngModel.days.length}function c(e){var t=v.ngModel.additionals.indexOf(e);t>-1?v.ngModel.additionals.splice(t,1):v.ngModel.additionals.push(e),d()}function u(){v.ngModel.milkRunFrequency==o.weekly.value&&0===v.ngModel.days.length?v.weeklyInvalid=!0:(v.weeklyInvalid=!1,v.ngModel.days=[])}function d(){v.saturdaysChecked=v.ngModel.additionals.indexOf(v.milkRunAdditionals.saturdays.value)>-1,v.sundaysChecked=v.ngModel.additionals.indexOf(v.milkRunAdditionals.sundays.value)>-1,v.afterOfficeHoursChecked=v.ngModel.additionals.indexOf(v.milkRunAdditionals.afterOfficeHours.value)>-1,v.publicHolidaysChecked=v.ngModel.additionals.indexOf(v.milkRunAdditionals.publicHolidays.value)>-1}function m(t){return a.getCustomerByCriteria({currentPage:1,itemPerPage:20,searchTerm:t},e.currentUser.department).then(function(e){return e.data.customers})}function p(e){v.ngModel.clientId=e.id,v.ngModel.clientName=e.organizationCode+" - "+e.name,v.users=e.applicationUsers}function g(){if(v.ngModel.requesterId&&v.users){var e=v.users.filter(function(e){return e.id===v.ngModel.requesterId});e&&e[0]&&e[0].costCentre&&(v.ngModel.requester=e[0].firstName+" "+e[0].lastName,v.costCenters=e[0].costCentre.split(","))}else v.ngModel.costCenter=""}function f(){v.users=[],v.costCenters=[],v.ngModel.requesterId="",v.ngModel.costCenter=""}function h(){v.currentProgress=n.collectionPoint}var v=this;v.milkRunTypes=t,v.milkRunFrequency=o,v.days=i,v.milkRunAdditionals=r,v.next=h,v.changeDay=s,v.changeAdditional=c,v.changeFrequency=u,v.searchClient=m,v.onSelectClient=p,v.changeUser=g,v.clientChange=f,l()}angular.module("milkRun.module").directive("choseMilkRunType",function(){return{restrict:"E",scope:{ngModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/choseMilkrunType.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","milkRunTypes","milkRunProgress","milkRunFrequency","days","milkRunAdditionals","customerService"]}(),function(){"use strict";function e(e,t){function n(){i.currentProgress=e.deliveryPoint}function o(){i.currentProgress=e.chosenMilkRunType}var i=this;i.milkRunTypes=t,i.next=n,i.back=o,i.ngModel.collectionPoints=i.ngModel.collectionPoints||[]}angular.module("milkRun.module").directive("collectionPoint",function(){return{restrict:"E",scope:{ngModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/collectionPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunProgress","milkRunTypes"]}(),function(){"use strict";function e(e,t,n,o,i,r){function a(){d.apllyItemTemplate=!1,d.ngModel.deliveryPoints=d.ngModel.deliveryPoints||[]}function l(){e.currentUser.role===r.Admin?d.currentProgress=n.remark:d.currentProgress=n.confirmOrder}function s(){d.currentProgress=n.collectionPoint}function c(){d.dataModal={newDeliveryPoint:{item:angular.copy(d.templateItem)},index:d.ngModel.deliveryPoints.length+1,applyTemplateItem:!1};var e={addNewDeliveryPoint:u};t.createPopup({templateUrl:"app/directives/milkRun/step/newDeliveryPointModal.html",size:"lg",data:d.dataModal},e)}function u(){var e=[],t=d.dataModal.newDeliveryPoint;d.dataModal.applyTemplateItem&&(d.templateItem=d.dataModal.newDeliveryPoint.item);for(var n in t.item)e.push({quantity:t.item[n],milkRunWeightId:o[n].id,text:o[n].text});d.ngModel.deliveryPoints.push({contact:t.contact,items:e})}var d=this;d.milkRunTypes=i,d.milkRunWeight=o,d.addNewDeliveryPoint=c,d.next=l,d.back=s,a()}angular.module("milkRun.module").directive("deliveryPoint",function(){return{restrict:"E",scope:{ngModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/deliveryPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","modalService","milkRunProgress","milkRunWeight","milkRunTypes","systemRole"]}(),function(){"use strict";function e(e){function t(){o.currentProgress=e.confirmOrder}function n(){o.currentProgress=e.deliveryPoint}var o=this;o.next=t,o.back=n}angular.module("milkRun.module").directive("remark",function(){return{restrict:"E",scope:{ngModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/remark.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunProgress"]}(),function(){"use strict";function e(e,t,n,o,i,r,a,l){function s(){f.isLoading=!0,i.saveMilkRun(f.ngModel).then(function(e){f.isLoading=!0;var n=f.ngModel.id?"The milkrun has been updated successfully.":"The milkrun has been created successfully.";l.success(n),t.path("/milkruns")})}function c(){a.createWarningPopup("Are you sure you want to reject this milkrun?","Warning",d)}function u(){a.createWarningPopup("Are you sure you want to approve this milkrun?","Warning",m)}function d(){}function m(){}function p(){e.currentUser.role===r.Admin?f.currentProgress=n.remark:f.currentProgress=n.deliveryPoint}function g(){f.viewMode=!1,f.currentProgress=n.chosenMilkRunType}var f=this;f.back=p,f.milkRunTypes=o,f.systemRole=r,f.confirmOrder=s,f.edit=g,f.rejectMilkRun=c,f.approveMilkRun=u}angular.module("milkRun.module").directive("confirmOrder",function(){return{restrict:"E",scope:{ngModel:"=",currentProgress:"=",viewMode:"="},templateUrl:"app/directives/milkRun/step/confirmOrder.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","$location","milkRunProgress","milkRunTypes","milkrunService","systemRole","modalService","toastr"]}(),function(){"use strict";function e(e,t){function n(t){for(var n in e)if(e[n].id==t)return e[n].text;return""}function o(e){i.ngModel.splice(e,1)}var i=this;i.milkRunTypes=t,i.getMilkRunText=n,i.removePoint=o}angular.module("milkRun.module").directive("listPoint",function(){return{restrict:"E",scope:{ngModel:"=",allowRemove:"=",milkRunType:"=?",onDetailClick:"&?"},templateUrl:"app/directives/milkRun/listPoint/listPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunWeight","milkRunTypes"]}(),function(){"use strict";function e(){var e=this;e.form=e.form||{}}angular.module("milkRun.module").directive("milkrunContact",function(){return{restrict:"E",scope:{ngModel:"=",form:"=?"},templateUrl:"app/directives/milkRun/contact/milkrunContact.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=[]}(),function(){"use strict";function e(e){var t=this;t.milkRunWeight=e,t.ngModel=t.ngModel||[{}],t.form=t.form||{}}angular.module("milkRun.module").directive("milkrunItem",function(){return{restrict:"E",scope:{ngModel:"=",form:"=?"},templateUrl:"app/directives/milkRun/milkrunItem/milkrunItem.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunWeight"]}(),function(){"use strict";function e(e,t){function n(){a.dataModal={point:{items:angular.copy(a.templateItem)||[]},index:a.ngModel.length+1,isOneToMany:a.milkRunType==e.oneToMany,applyTemplateItem:!1,isAddNew:!0},r()}function o(){a.dataModal.applyTemplateItem&&(a.templateItem=a.dataModal.point.items),a.dataModal.isAddNew?a.ngModel.push(a.dataModal.point):a.ngModel[a.dataModal.index-1]=a.dataModal.point}function i(t,n){a.dataModal={point:t,index:n,isOneToMany:a.milkRunType==e.oneToMany,applyTemplateItem:!1},r()}function r(){var e={updatePoint:o};t.createPopup({templateUrl:"app/directives/milkRun/point/newPointModal.html",size:"lg",data:a.dataModal},e)}var a=this;a.ngModel=a.ngModel||[],a.milkRunTypes=e,a.addNewPoint=n,a.editPoint=i}angular.module("milkRun.module").directive("manyPoint",function(){return{restrict:"E",scope:{ngModel:"=",milkRunType:"="},templateUrl:"app/directives/milkRun/point/manyPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunTypes","modalService"]}(),function(){"use strict";function e(){var e=this;e.ngModel=e.ngModel||[]}angular.module("milkRun.module").directive("onePoint",function(){return{restrict:"E",scope:{ngModel:"=",contactForm:"=?",milkRunItemForm:"=?"},templateUrl:"app/directives/milkRun/point/onePoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=[]}(),function(){"use strict";function e(){var e=this;e.ngModel=e.ngModel||[]}angular.module("milkRun.module").directive("pointDetail",function(){return{restrict:"E",scope:{ngModel:"=",milkRunType:"="},templateUrl:"app/directives/milkRun/point/pointDetail.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=[]}();