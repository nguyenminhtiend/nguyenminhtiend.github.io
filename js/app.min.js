!function(){"use strict";function e(e){e.when("/",{redirectTo:"/customers"}).when("/joblist",{redirectTo:"/jobList"}).otherwise({redirectTo:"/"})}function t(e,t,n,o){var r=o.getCurrentUser();r?e.currentUser=r:n.path("/login"),e.$on("$locationChangeStart",function(e,r,i){var a=n.path(),s=t.routes[a];if(s&&s.authorize)return o.isAuthenticated()?void(o.isAuthorized(s.authorize)||n.path("/login")):void n.path("/login")}),e.$on("$routeChangeSuccess",function(){t.current&&(e.hideHeader=t.current.hideHeader,e.category=t.current.category),t.current.title?document.title="ST Logistics - "+t.current.title:document.title="ST Logistics"})}function n(e){e.interceptors.push("httpInterceptor")}angular.module("main.module",["ngRoute","ngAnimate","ui.bootstrap","LocalStorageModule","ui.bootstrap.datetimepicker","toastr","ngTouch","ngSanitize","angularjs-dropdown-multiselect","hljs","customer.module","spAdminUser.module","adminUser.module","account.module","jobList.module","milkRun.module","transaction.module"]).config(n).config(e).run(t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$route","$location","authService"],n.$inject=["$httpProvider"]}(),function(){"use strict";angular.module("main.module").constant("systemSetting",{serviceUrl:"http://ec2-52-77-214-252.ap-southeast-1.compute.amazonaws.com"}).constant("systemRole",{User:1,Admin:2,SuperAdmin:3}).constant("setItemPerPage",[{value:10,text:"10 entities"},{value:20,text:"20 entities"},{value:50,text:"50 entities"},{value:100,text:"100 entities"}]).constant("pageName",{TRANSACTIONS:"Transactions",USERS:"Users",CLIENTS:"Customers",JOBTYPES:"Jobtypes",LOCATIONS:"Locations",REPORTS:"Reports"}).constant("departments",{PSS:{id:1,name:"PSS"},Healthcare:{id:2,name:"Healthcare"}}).constant("pricingType",{Adhoc:0,AdhocExpres:1,MilkRun:2}).constant("weightCategory",{ThreeKg:0,FourKg:1,FiveKg:2,TenKg:3,TwentyKg:4,Extra:5}).constant("milkRunTypes",{oneToMany:0,manyToOne:1,oneToOne:2}).constant("milkRunProgress",{chosenMilkRunType:1,collectionPoint:2,deliveryPoint:3,remark:4,confirmOrder:5})}(),function(){"use strict";function e(e){e.when("/customers",{title:"Client Management",category:"Customers",controller:"CustomerController",templateUrl:"app/components/customer/customers.html",controllerAs:"vm",authorize:"Admin"}).when("/customers/create",{title:"Create new client",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:"Admin"}).when("/customers/detail/:id",{title:"Client detail",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:"Admin"}).when("/example",{title:"example",controller:"ExampleController",templateUrl:"app/components/customer/example.html",controllerAs:"vm",authorize:"Admin",hideHeader:!0})}function t(e,t,n){function o(){r(),i()}function r(){s.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},s.gridConfig={onClickRowDetail:a,columns:[{name:"sapCode",display:"SAP Code",columnNameSort:"sapCode"},{name:"organizationCode",display:"Organization Code",columnNameSort:"organizationCode"},{name:"name",display:"Organization Name",columnNameSort:"name"},{name:"clientType",display:"Client Type",columnNameSort:"departmentId"},{name:"address",display:"Address",columnNameSort:"addressId"}]}}function i(){s.isGridLoading=!0,n.getCustomerByCriteria(s.options,e.currentUser.department).then(function(e){s.options.totalItems=e.data.totalCount,s.customers=n.convertListCustomer(e.data.customers),s.isGridLoading=!1})}function a(e){t.path("/customers/detail/"+e.id)}var s=this;s.getCustomerByCriteria=i,o()}function n(e,t,n,o,r,i){function a(){var n=t.id;n?(r.getCustomerById(n).then(function(e){l.clientDetail=r.convertCustomer(e.data)}),l.viewMode=!0):(l.clientDetail={department:{name:e.currentUser.department},clientTypeId:o[e.currentUser.department].id,users:[],pricings:[],address:{}},l.viewMode=!1)}function s(){r.saveCustomer(l.clientDetail).then(function(e){var t=l.clientDetail.id?"The client has been updated successfully.":"The client has been created successfully.";i.success(t),n.path("/customers")})}var l=this;l.pssAdhocPricing={},l.healthCareAdhocPricing={},l.newUser={},l.saveCustomer=s,a()}function o(e){var t=this;t.open=function(){e.success("Hello world!","Toastr fun!")}}angular.module("customer.module",["ngRoute"]).config(e).controller("CustomerController",t).controller("CustomerDetailController",n).controller("ExampleController",o),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$location","customerService"],n.$inject=["$rootScope","$routeParams","$location","departments","customerService","toastr"],o.$inject=["toastr"]}(),function(){"use strict";function e(e,t,n){function o(){r()}function r(){p.milkRunPricingExist=i(e.MilkRun)>=0,p.adhocPricingExist=i(e.Adhoc)>=0,p.adhocExpresPricingExist=i(e.AdhocExpres)>=0}function i(e){for(var t=0;t<p.listPricing.length;t++)if(p.listPricing[t].pricingType===e)return t;return-1}function a(e,t){if(e.weightCategories&&e.weightCategories.length>0)for(var n=0;n<e.weightCategories.length;n++)if(e.weightCategories[n].category===t)return n;return-1}function s(t){var o,r=i(t);o=r>=0?angular.copy(p.listPricing[r]):{pricingType:t},p.adhocPricingModel=u(o);var a={setPricing:l},s=t===e.MilkRun?"app/components/customer/pricing/milkRunPricingModal.html":"app/components/customer/pricing/adhocPricingModal.html";n.createPopup({templateUrl:s,size:"lg",data:p.adhocPricingModel},a)}function l(){var e=m(p.adhocPricingModel),t=i(e.pricingType);t>=0?p.listPricing[t]=e:p.listPricing.push(e),r()}function c(e,t){if(p[t])p[t]=!1,n.createWarningPopup("Please set pricing for this service first!","Warning",null,!0);else{var o=i(e);o>=0&&p.listPricing.splice(o,1)}}function u(e){var n=angular.copy(e),o={};for(var r in t)o[r]=d(e,t[r]);return n.weightCategories=o,n}function m(e){var t=angular.copy(e),n=[];for(var o in e.weightCategories){var r=e.weightCategories[o];(r.threeHourRate||r.sameDayRate||r.nextDayRate)&&n.push(e.weightCategories[o])}return t.weightCategories=n,t}function d(e,t){var n=a(e,t),o=n>-1?e.weightCategories[n]:{category:t};return o}var p=this;p.listPricing=p.listPricing||[],p.pricingType=e,p.setPricing=s,p.checkSetPricing=c,o()}angular.module("customer.module").directive("customerPricing",function(){return{restrict:"E",scope:{viewMode:"=",listPricing:"="},templateUrl:"app/components/customer/pricing/customerPricing.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["pricingType","weightCategory","modalService"]}(),function(){"use strict";function e(e){function t(){o.newUser={workAddress:{},billingAddresses:[{}]};var t={onCreateOrUpdate:n};e.createPopup({templateUrl:"app/components/customer/user/userDetail.html",size:"lg",data:o.newUser},t)}function n(){o.listUser.push(o.newUser)}var o=this;o.addNewUser=t,o.listUser=o.listUser||[]}angular.module("customer.module").directive("customerUser",function(){return{restrict:"E",scope:{viewMode:"=",listUser:"=",orgCode:"@"},templateUrl:"app/components/customer/user/customerUser.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["modalService"]}(),function(){"use strict";function e(e){e.when("/users",{title:"User management",category:"Users",controller:"SpAdminUserController",templateUrl:"app/components/spAdminUser/users.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/create",{title:"New admin",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/detail/:id",{title:"Admin detail",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"})}function t(e,t){function n(){o(),r()}function o(){a.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},a.gridConfig={onClickRowDetail:i,columns:[{name:"name",display:"Name",columnNameSort:"firstName"},{name:"email",display:"Email",columnNameSort:"email"},{name:"phoneNumber",display:"Contact number",columnNameSort:"phoneNumber"},{name:"departmentName",display:"Department",columnNameSort:"department"}]}}function r(){a.isGridLoading=!0,t.getAdminUserByCriteria(a.options).then(function(e){a.options.totalItems=e.data.totalCount;var t=e.data.users;angular.forEach(t,function(e){e.name=e.firstName+" "+e.lastName,e.departmentName=e.department.name}),a.users=t,a.isGridLoading=!1})}function i(t){e.path("/users/detail/"+t.id)}var a=this;a.getAdminUserByCriteria=r,n()}function n(e,t,n,o,r,i){function a(){var t=e.id;t?(n.getAdminUserById(t).then(function(e){m.userDetail=e.data,m.isActive=m.userDetail.lockoutEnabled}),m.viewMode=!0):m.viewMode=!1}function s(){m.viewMode=!1}function l(){m.isSaving=!0,n.saveAdminUser(m.userDetail).then(function(e){m.isSaving=!1;var n=m.userDetail.id?"The admin has been updated successfully.":"The admin has been created successfully.";r.success(n),t.path("/users")})}function c(){var e=m.userDetail.lockoutEnabled?"Are you sure you want to activate this admin?":"Are you sure you want to deactivate this admin?";i.createWarningPopup(e,"Warning",u)}function u(){n.activateOrDeactivate(m.userDetail).then(function(e){var t=m.userDetail.lockoutEnabled?"The admin has been activated successfully.":"The admin has been deactivated successfully.";m.userDetail.lockoutEnabled=!m.userDetail.lockoutEnabled,r.success(t)})}var m=this;m.departments=o,m.edit=s,m.save=l,m.activateOrDeactivate=c,a()}angular.module("spAdminUser.module",["ngRoute"]).config(e).controller("SpAdminUserController",t).controller("SpAdminUserDetailController",n),e.$inject=["$routeProvider"],t.$inject=["$location","adminUserService"],n.$inject=["$routeParams","$location","adminUserService","departments","toastr","modalService"]}(),function(){"use strict";function e(e){e.when("/login",{title:"Login",controller:"AccountController",templateUrl:"app/components/account/login.html",controllerAs:"vm",hideHeader:!0}).when("/account/forgot",{title:"Forgot password",controller:"AccountController",templateUrl:"app/components/account/forgot.html",controllerAs:"vm",hideHeader:!0}).when("/account/activate",{title:"Activate account",controller:"AccountController",templateUrl:"app/components/account/activate.html",controllerAs:"vm",hideHeader:!0})}function t(e,t,n){function o(){return s.email&&s.password?(s.isLoginInProgress=!0,void t.login(s.email,s.password).then(function(e){s.isLoginInProgress=!1,a(e)},function(){s.password="",s.isLoginInProgress=!1,s.wrongPassword=!0})):void(s.wrongPassword=!0)}function r(){n.path("/login")}function i(){s.isSentResetPassword=!0}function a(t){e.currentUser=t,n.path("/customers")}var s=this;s.login=o,s.activateAccount=r,s.resetPassword=i}angular.module("account.module",["ngRoute"]).config(e).controller("AccountController",t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","authService","$location"]}(),function(){"use strict";function e(e){e.when("/jobList",{title:"jobList",controller:"JobListController",templateUrl:"app/components/jobList/jobList.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/jobList/create",{title:"New Adhoc job",category:"Adhoc",controller:"JobAdhocNewController",templateUrl:"app/components/jobList/jobAdhocNew.html",controllerAs:"vm",authorize:"Admin"})}function t(e,t){function n(){d.fromDate=new Date,d.toDate=new Date,d.requestButton="All",d.statusButton="All",d.customerButton="All",i(),s(),c(),m("Adhoc"),o()}function o(){d.gridConfig={columnIdentity:"id",navigationDetail:"/jobList/jobAdhocNew.html/",columns:[{name:"collectionBarcode",display:"Collection barcode",id:1},{name:"customer",display:"Customer",id:2},{name:"createdDate",display:"Created date",id:3},{name:"requestType",display:"Request type",id:4},{name:"reqStatus",display:"Req status",id:5},{name:"status",display:"Status",id:6},{name:"pickupPoint",display:"Pick up point",id:7},{name:"deliveryPoint",display:"Delivery point",id:8}]},r()}function r(){d.isGridLoading=!0,e(function(){d.data=[],d.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20,totalItems:10};for(var e=0;e<100;e++)d.data.push({collectionBarcode:"C543645E411NE",customer:"ICA-Costal Command",createdDate:"27/01/2016 08:09:03",requestType:"Normal Service",reqStatus:"Waiting",status:"N/A",pickupPoint:"10 Brani Way Singapore",deliveryPoint:"31 Marina Coastal Drive Singapore 175384"});d.optionsGrid.totalItems=100,d.isGridLoading=!1},2e3)}function i(){d.requestTypes=["All","Normal service 1","Normal service 2","Normal service 3"]}function a(e){d.requestButton=e}function s(){d.statusList=["All","Picking up","Collected","N/A"]}function l(e){d.statusButton=e}function c(){d.customerList=["All","ICA-Costal Command 1","ICA-Costal Command 2","ICA-Costal Command 3"]}function u(e){d.customerButton=e}function m(e){"Adhoc"===e?(d.modelClassAdhoc="btn btn-default btn-block btn-action active",d.modelClassMilkRun="btn btn-default btn-block btn-additional"):(d.modelClassAdhoc="btn btn-default btn-block btn-additional",d.modelClassMilkRun="btn btn-default btn-block btn-action active")}var d=this;d.getTransactionByCriteria=r,d.requestTypes=[],d.getRequestTypes=i,d.changeRequest=a,d.statusList=[],d.getStatusList=s,d.changeStatus=l,d.customerList=[],d.getCustomerList=c,d.changeCustomer=u,d.getTransactions=m,n()}function n(e,t,n){function o(){m.viewMode=!0,m.totalChargeAmount=0;var e=new Date;m.dateRequest=e.toLocaleDateString()}function r(){var e={addNewItem:i};n.createPopup({templateUrl:"app/components/jobList/jobAdhocNewItem.html",size:"lg",data:m.itemDetail},e)}function i(){var e=0;e=null!==m.itemList&&m.itemList.length>0?parseInt(m.itemList.length)+1:1,m.itemList.push({no:e,itemDescription:m.itemDetail.itemDescription,uom:m.itemDetail.uom,unitMass:m.itemDetail.unitMass,unitVol:m.itemDetail.unitVol,issueQty:m.itemDetail.issueQty,remark:m.itemDetail.remark}),m.itemDetail={}}function a(){var e={addAdditionalCharge:s};n.createPopup({templateUrl:"app/components/jobList/jobAdhocAdtnCharge.html",size:"lg",data:m.chargeDetail},e)}function s(){m.chargeList.push({description:m.chargeDetail.description,price:m.chargeDetail.price}),m.totalChargeAmount=l(),m.chargeDetail={}}function l(){for(var e=0,t=0,n=m.chargeList.length;t<n;t++)e+=parseFloat(m.chargeList[t].price);return e}function c(){var e={viewPricing:u};n.createPopup({templateUrl:"app/components/jobList/jobAdhocPricingView.html",size:"lg",data:m.adhocPriceDetail},e)}function u(){}var m=this;m.itemDetail={},m.chargeDetail={},m.dateRequest={},m.itemList=[],m.chargeList=[],m.addNewItem=r,m.addAdditionalCharge=a,m.viewPricing=c,o()}angular.module("jobList.module",["ngRoute"]).config(e).controller("JobListController",t).controller("JobAdhocNewController",n),e.$inject=["$routeProvider"],t.$inject=["$timeout","$uibModal"],n.$inject=["$timeout","$uibModal","modalService"]}(),function(){"use strict";function e(e){e.when("/clientUsers",{title:"User Client management",category:"Users",controller:"AdminUserController",templateUrl:"app/components/adminUser/clientUsers.html",controllerAs:"vm",authorize:"Admin"})}function t(e,t,n){function o(){r(),i()}function r(){m.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},m.gridConfig={onClickRowDetail:l,columns:[{name:"name",display:"Name",css:"col-md-2",columnNameSort:"firstName"},{name:"email",display:"Email",css:"col-md-2",columnNameSort:"email"},{name:"phoneNumber",display:"Contact no",css:"column-user-phoneNumer",columnNameSort:"phoneNumber"},{name:"workAddress",display:"Office address",css:"col-md-2",columnNameSort:"workAddress"},{name:"billingAddresses",display:"Billing address",css:"col-md-2",columnNameSort:"billingAddresses"},{name:"orgCode",display:"Org code",css:"column-user-orgCode",columnNameSort:"orgCode"},{name:"costCentre",display:"Cost centre",css:"column-user-costCentre",columnNameSort:"costCentre"}]}}function i(){m.isGridLoading=!0,t.getClientUserByCriteria(m.options).then(function(e){m.options.totalItems=e.data.totalCount,m.users=t.convertListUser(e.data.users),m.isGridLoading=!1})}function a(){m.userDetail={};var e={addNewUser:s};c(e)}function s(){m.data.push({name:m.userDetail.firstName+" "+m.userDetail.lastName,email:m.userDetail.email,contactNo:m.userDetail.mobileNumber,officeAddress:m.userDetail.workAddress.postalCode+" "+m.userDetail.workAddress.blockNumber+" "+m.userDetail.workAddress.streetName+" "+m.userDetail.workAddress.unitNumber,billingAddress:m.userDetail.billingAddress.postalCode+" "+m.userDetail.billingAddress.blockNumber+" "+m.userDetail.billingAddress.streetName+" "+m.userDetail.billingAddress.unitNumber,orgCode:"ICA",costCentre:m.userDetail.costCenter})}function l(e){t.getClientUserById(e.id).then(function(e){m.userDetail=e.data;var t={onCreateOrUpdate:u};c(t)})}function c(t){e.createPopup({templateUrl:"app/components/customer/user/userDetail.html",size:"lg",data:m.userDetail},t)}function u(){m.isGridLoading=!0,t.updateClientUser(m.userDetail).then(function(e){n.success("The user has been updated successfully."),i()})}var m=this;m.userDetail={},m.getUserByCriteria=i,m.addNewUser=a,o()}angular.module("adminUser.module",["ngRoute"]).config(e).controller("AdminUserController",t),e.$inject=["$routeProvider"],t.$inject=["modalService","clientUserService","toastr"]}(),function(){"use strict";function e(e){e.when("/milkrun/create",{title:"Create new milkrun",category:"Transactions",controller:"MilkRunDetailController",templateUrl:"app/components/milkRun/detail.html",controllerAs:"vm",authorize:"Admin"})}function t(e){var t=this;t.milkRunProgress=e,t.currentProgress=e.chosenMilkRunType}angular.module("milkRun.module",["ngRoute"]).config(e).controller("MilkRunDetailController",t),e.$inject=["$routeProvider"],t.$inject=["milkRunProgress"]}(),function(){"use strict";function e(e){e.when("/transactions",{title:"Transaction management",category:"Transactions",controller:"TransactionController",templateUrl:"app/components/transaction/transactions.html",controllerAs:"vm",authorize:"Admin"})}function t(e){function t(){n.isMilkrunActive&&e.path("/milkrun/create")}var n=this;n.isMilkrunActive=!0,n.onNewJobClick=t}angular.module("transaction.module",["ngRoute"]).config(e).controller("TransactionController",t),e.$inject=["$routeProvider"],t.$inject=["$location"]}(),function(){"use strict";function e(e,t,n,o,r){function i(){return!!c()}function a(e){var t=c();return!!(t&&o[t.role]>=o[e])}function s(o,i){var a=t.defer(),s=r.serviceUrl+"/api/account/token",l={username:o,password:i};return e.post(s,l).then(function(e){var t={access_token:e.data.accessToken,token_type:e.data.tokenType},o={email:e.data.email,role:e.data.role,department:e.data.department};n.set("tokenInfo",t),n.set("userInfo",o),a.resolve(o)},function(e){a.reject()}),a.promise}function l(){n.remove("tokenInfo"),n.remove("userInfo")}function c(){return n.get("userInfo")}var u={isAuthenticated:i,isAuthorized:a,login:s,logout:l,getCurrentUser:c};return u}angular.module("main.module").factory("authService",e),e.$inject=["$http","$q","localStorageService","systemRole","systemSetting"]}(),function(){"use strict";function e(e){function t(t,n,o){var r=e.open({animation:!0,templateUrl:t.templateUrl,controller:"ModalInstanceCtrl",controllerAs:"vm",size:t.size,backdrop:"static",resolve:{data:function(){return t.data}}});r.result.then(function(e){n[e]()},o)}function n(t,n,o,r){var i=e.open({animation:!0,templateUrl:"app/directives/commonControls/warningModal/warningModal.html",controller:"ModalInstanceCtrl",controllerAs:"vm",backdrop:"static",resolve:{data:function(){return{message:t,title:n,isHideActionButton:r}}}});i.result.then(function(e){o&&o()})}var o={createPopup:t,createWarningPopup:n};return o}angular.module("main.module").factory("modalService",e),e.$inject=["$uibModal"]}(),function(){"use strict";function e(e,t,n){function o(e){e.headers=e.headers||{};var n=t.get("tokenInfo");return n&&(e.headers.Authorization=n.token_type+" "+n.access_token),e}var r={request:o};return r}angular.module("main.module").factory("httpInterceptor",e),e.$inject=["$q","localStorageService","systemSetting"]}(),function(){"use strict";function e(e,t,n){function o(t){return t.id?e.put(s+t.id,t):e.post(s,t)}function r(t){var n=s+"?offset="+(t.currentPage-1)*t.itemPerPage;return n+="&limit="+t.itemPerPage,t.searchTerm&&(n+="&search="+t.searchTerm),t.sortColumn&&(n+="&sortBy="+t.sortColumn,n+="&ascending="+t.sortAscending),e.get(n)}function i(t){return e.get(s+t)}function a(t){var n=t.lockoutEnabled?"activate/":"deactivate/";return e.post(s+n+t.id)}var s=n.serviceUrl+"/api/adminusers/",l={saveAdminUser:o,getAdminUserByCriteria:r,getAdminUserById:i,activateOrDeactivate:a};return l}angular.module("main.module").factory("adminUserService",e),e.$inject=["$http","$q","systemSetting"]}(),function(){"use strict";function e(e,t){function n(t,n){var o=s+"?offset="+(t.currentPage-1)*t.itemPerPage;return o+="&limit="+t.itemPerPage,t.searchTerm&&(o+="&search="+t.searchTerm),n&&(o+="&department="+n),t.sortColumn&&(o+="&sortBy="+t.sortColumn,o+="&ascending="+t.sortAscending),e.get(o)}function o(t){return e.get(s+t)}function r(t){return t.id?e.put(s+t.id,t):e.post(s,t)}function i(e){var t=[];return angular.forEach(e,function(e){t.push({id:e.id,sapCode:e.sapCode,organizationCode:e.organizationCode,name:e.name,clientType:e.department.name,address:e.address?e.address.postalCode+" "+e.address.blockNumber+" "+e.address.streetName+" "+e.address.unitNumber:""})}),t}function a(e){var t={id:e.id,name:e.name,organizationCode:e.organizationCode,sapCode:e.sapCode,contactPerson:e.contactPerson,contactNumber:e.contactNumber,endDateOfContract:new Date(e.contractEndDate),cutoffTimeSameDay:new Date(e.cutOffTimeForSameDayPickupAndDelivery),cutOffTimeNextDay:new Date(e.cutOffTimeForSameDayPickupAndNextDayDelivery),address:e.address,department:e.department,clientTypeId:e.department.id,users:e.applicationUsers,pricings:e.pricings};return t}var s=t.serviceUrl+"/api/customers/",l={getCustomerByCriteria:n,getCustomerById:o,saveCustomer:r,convertListCustomer:i,convertCustomer:a};return l}angular.module("main.module").factory("customerService",e),e.$inject=["$http","systemSetting"]}(),function(){"use strict";function e(e,t){function n(t){var n=a+"?offset="+(t.currentPage-1)*t.itemPerPage;return n+="&limit="+t.itemPerPage,t.searchTerm&&(n+="&search="+t.searchTerm),e.get(n)}function o(t){return e.get(a+t)}function r(t){return e.put(a+t.id,t)}function i(e){var t=[];return angular.forEach(e,function(e){t.push({id:e.id,name:e.firstName+" "+e.lastName,email:e.email,phoneNumber:e.phoneNumber,costCentre:e.costCentre,workAddress:e.workAddress?e.workAddress.postalCode+" "+e.workAddress.blockNumber+" "+e.workAddress.streetName+" "+e.workAddress.unitNumber:"",billingAddresses:e.billingAddresses&&e.billingAddresses[0]?e.billingAddresses[0].postalCode+" "+e.billingAddresses[0].blockNumber+" "+e.billingAddresses[0].streetName+" "+e.billingAddresses[0].unitNumber:"",orgCode:e.orgCode})}),t}var a=t.serviceUrl+"/api/users/",s={getClientUserByCriteria:n,getClientUserById:o,convertListUser:i,updateClientUser:r};return s}angular.module("main.module").factory("clientUserService",e),e.$inject=["$http","systemSetting"]}(),function(){"use strict";function e(e){function t(){r.showChosenColumn&&(r.isContainColumn=o,r.translationTexts={checkAll:"Show All",dynamicButtonTextSuffix:"columns"},r.chosenColumnConfig={idProp:"name",displayProp:"display",showUncheckAll:!1},r.chosenColumnModel=[],angular.forEach(r.gridConfig.columns,function(e){r.chosenColumnModel.push({id:e.name})}))}function n(e){r.options.sortColumn===e?r.options.sortAscending=!r.options.sortAscending:(r.options.sortAscending=!0,r.options.sortColumn=e),r.actionRequest()}function o(e){var t=!1;return angular.forEach(r.chosenColumnModel,function(n){n.id===e&&(t=!0)}),t}var r=this;r.setItemPerPage=e,r.sort=n,t(),r.eventsChosenColumn={onItemDeselect:function(e){1===r.chosenColumnModel.length&&r.chosenColumnModel.push(e)}}}angular.module("main.module").directive("grid",function(){return{restrict:"E",scope:{gridConfig:"=",options:"=",data:"=",actionRequest:"&",isLoading:"=",showChosenColumn:"=?"},templateUrl:"app/directives/commonControls/grid/grid.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage"]}(),function(){"use strict";function e(e,t){function n(e){l.optionsGrid.sortColumn===e?l.optionsGrid.sortAscending=!l.optionsGrid.sortAscending:(l.optionsGrid.sortAscending=!0,l.optionsGrid.sortColumn=e),l.actionRequest()}function o(e){t.path(l.gridConfig.navigationDetail+e)}function r(e){console.log("select > "+e.id),a(e.id)}function i(e){console.log("deselect : "+e.id),s(e.id)}function a(e){switch(e){case 1:l.column1=!0;break;case 2:l.column2=!0;break;case 3:l.column3=!0;break;case 4:l.column4=!0;break;case 5:l.column5=!0;break;case 6:l.column6=!0;break;case 7:l.column7=!0;break;case 8:l.column8=!0}}function s(e){switch(e){case 1:l.column1=!1;break;case 2:l.column2=!1;break;case 3:l.column3=!1;break;case 4:l.column4=!1;break;case 5:l.column5=!1;break;case 6:l.column6=!1;break;case 7:l.column7=!1;break;case 8:l.column8=!1}}var l=this;l.setItemPerPage=e,l.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20,totalItems:0},l.sort=n,l.navigateToDetail=o,l.columnModel=[],l.columnsData=[{id:1,label:"Collection barcode"},{id:2,label:"Customer"},{id:3,label:"Created date"},{id:4,label:"Request type"},{id:5,label:"Request status"},{id:6,label:"Status"},{id:7,label:"Pick up point"},{id:8,label:"Delivery point"}],l.defaultText={buttonDefaultText:"Default"},l.column1=!0,l.column2=!0,l.column3=!0,l.column4=!0,l.column5=!0,l.column6=!0,l.column7=!0,l.column8=!0,l.columnModel=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8}],l.eventListeners={onItemSelect:r,onItemDeselect:i}}angular.module("main.module").directive("gridExt",function(){return{restrict:"E",scope:{gridConfig:"=",optionsGrid:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/gridExt/gridExt.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage","$location"]}(),function(){"use strict";function e(e,t){var n=this;n.data=t,n.ok=function(t){e.close(t)},n.cancel=function(){e.dismiss("cancel")}}angular.module("main.module").controller("ModalInstanceCtrl",e),e.$inject=["$uibModalInstance","data"]}(),function(){"use strict";function e(e,t,n,o){function r(){n.logout(),e.currentUser=null,t.path("/login")}var i=this;i.pageName=o,i.logout=r}angular.module("main.module").directive("headerPage",function(){return{restrict:"E",templateUrl:"app/directives/header/header.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","$location","authService","pageName"]}(),function(){"use strict";angular.module("main.module").directive("compareTo",function(){return{restrict:"A",require:"ngModel",scope:{compareTo:"=compareTo"},link:function(e,t,n,o){t.bind("keyup",function(){e.$apply(function(){var n=t.val(),r=e.compareTo,i=n&&n===r;o.$setValidity("compareTo",i)})})}}})}(),function(){"use strict";function e(){var e=this;e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customDatePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/datePicker/datePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){var e=this;e.timepickerOptions={showMeridian:!1},e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customTimePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/timePicker/timePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){function e(){n.userDetail.billingAddresses.push({postalCode:"",blockNumber:"",streetName:"",unitNumber:""})}function t(e){n.userDetail.billingAddresses.splice(e,1)}var n=this;n.addBillingAddress=e,n.deleteBillAddress=t}angular.module("main.module").directive("userClientDetail",function(){return{restrict:"E",scope:{userDetail:"=",onCreateOrUpdate:"&",onCancel:"&"},templateUrl:"app/directives/userClient/userClientDetail.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/directives/adhocItem/adhocItemDetail.html",scope:{itemDetail:"=",onCreate:"&",onCancel:"&"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e){function t(){o.itemDetail.unitVol=0,o.itemDetail.width=0,o.itemDetail.height=0,o.itemDetail.depth=0}function n(e,t){o.itemDetail.unitVol=o.itemDetail.width*o.itemDetail.height*o.itemDetail.depth}var o=this;t(),e.$watch("vm.itemDetail.width + vm.itemDetail.height + vm.itemDetail.depth",n)}angular.module("main.module").directive("adhocItemDetail",e),t.$inject=["$scope"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/directives/adhocCharge/adhocChargeDetail.html",scope:{chargeDetail:"=",onCreate:"&",onCancel:"&"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(){function e(){}e()}angular.module("main.module").directive("adhocChargeDetail",e)}(),function(){"use strict";function e(){function e(){o()}function t(e){return[{postalCode:"Postal Code 1",blockNumber:"70",streetName:"Anson Road 1",unitNumber:"2326"},{postalCode:"Postal Code 2",blockNumber:"80",streetName:"Anson Road 2",unitNumber:"2326"},{postalCode:"Postal Code 3",blockNumber:"70",streetName:"Anson Road 3",unitNumber:"2326"}]}function n(e){r.ngModel.postalCode=e.postalCode,r.ngModel.blockNumber=e.blockNumber,r.ngModel.streetName=e.streetName,r.ngModel.unitNumber=e.unitNumber}function o(){r.ngModel.postalCode&&r.ngModel.blockNumber&&r.ngModel.streetName&&r.ngModel.unitNumber?r.isValid=!0:r.isValid=!1}var r=this;r.ngModel.name=r.ngModel.name||"Address Name",r.searchAddressByPostalCode=t,r.onSelect=n,r.checkValidAddress=o,e()}angular.module("main.module").directive("userAddress",function(){return{restrict:"E",scope:{ngModel:"=",isSearchable:"=",isDelete:"=?",isShowFullWidth:"=",onDelete:"&?",isValid:"=?",isShowWarning:"=?",warningMessage:"@?"},templateUrl:"app/directives/userClient/userAddress.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(e,t){function n(){o(),r()}function o(){a.options={sortColumn:"",sortAscending:!0,itemPerPage:20,currentPage:1,searchTerm:""},a.gridConfig={onClickRowDetail:i,columns:[{name:"barcode",display:"Barcode",columnNameSort:"barcode",css:"col-md-1"},{name:"customer",display:"Customer",columnNameSort:"customer",css:"col-md-2"},{name:"pickUpPoint",display:"Pick up point",columnNameSort:"pickUpPoint",css:"col-md-2"},{name:"deliveryPoint",display:"Delivery Point",columnNameSort:"deliveryPoint",css:"col-md-2"},{name:"frequency",display:"Frequency",columnNameSort:"frequency",css:"col-md-2"},{name:"items",display:"Items",columnNameSort:"items",css:"col-md-2"},{name:"status",display:"Status",columnNameSort:"status",css:"col-md-1"}]}}function r(){a.isGridLoading=!0,t(function(){a.listMilkRun=[];for(var e=0;e<10;e++)a.listMilkRun.push({id:e,barcode:"Sebastien",customer:"ICA - Costal Command",pickUpPoint:"10 Brani Way Singapore 098753  #05-04",deliveryPoint:"31 Marina Coastal Drive Singapore 175384 #03-20",frequency:"Weekly (Mondays, Tuesdays), After Office Hours",items:"Up to 5kg(x2), < 5kg - 10kg (x10), < 10kg - 30kg(x6)",status:"Pickup (2/6)"});a.options.totalItems=175,a.isGridLoading=!1},1e3)}function i(t){e.path("/users/detail/"+t.id)}var a=this;a.getMilkRunByCriteria=r,n()}angular.module("main.module").directive("milkRunManagement",function(){return{restrict:"E",scope:{},templateUrl:"app/directives/milkRun/milkRunManagement.html",controller:e,
controllerAs:"vm",bindToController:!0}}),e.$inject=["$location","$timeout"]}(),function(){"use strict";function e(e,t){function n(){o.currentProgress=t.collectionPoint}var o=this;o.milkRunTypes=e,o.next=n}angular.module("milkRun.module").directive("choseMilkRunType",function(){return{restrict:"E",scope:{dataModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/choseMilkRunType.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunTypes","milkRunProgress"]}(),function(){"use strict";function e(e){function t(){o.currentProgress=e.deliveryPoint}function n(){o.currentProgress=e.chosenMilkRunType}var o=this;o.address={},o.next=t,o.back=n}angular.module("milkRun.module").directive("collectionPoint",function(){return{restrict:"E",scope:{dataModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/collectionPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunProgress"]}(),function(){"use strict";function e(e,t){function n(){a.currentProgress=t.remark}function o(){a.currentProgress=t.collectionPoint}function r(){a.newDeliveryPoint={};var t={addNewDeliveryPoint:i};e.createPopup({templateUrl:"app/directives/milkRun/step/newDeliveryPointModal.html",size:"lg",data:a.newDeliveryPoint},t)}function i(){a.listDeliveryPoint.push(a.newDeliveryPoint)}var a=this;a.listDeliveryPoint=[],a.addNewDeliveryPoint=r,a.next=n,a.back=o}angular.module("milkRun.module").directive("deliveryPoint",function(){return{restrict:"E",scope:{dataModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/deliveryPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["modalService","milkRunProgress"]}(),function(){"use strict";function e(e){function t(){o.currentProgress=e.confirmOrder}function n(){o.currentProgress=e.deliveryPoint}var o=this;o.next=t,o.back=n}angular.module("milkRun.module").directive("remark",function(){return{restrict:"E",scope:{dataModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/remark.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunProgress"]}(),function(){"use strict";function e(e){function t(){}function n(){o.currentProgress=e.remark}var o=this;o.back=n,o.confirmOrder=t,o.listDeliveryPoint=[{no:"6236236",address:"ajlgagj",contactPerson:"235525",contactNumber:"523526226",items:"52352523"}]}angular.module("milkRun.module").directive("confirmOrder",function(){return{restrict:"E",scope:{dataModel:"=",currentProgress:"="},templateUrl:"app/directives/milkRun/step/confirmOrder.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["milkRunProgress"]}(),function(){"use strict";function e(){}angular.module("milkRun.module").directive("listDeliveryPoint",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/milkRun/listDeliveryPoint/listDeliveryPoint.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=[]}();