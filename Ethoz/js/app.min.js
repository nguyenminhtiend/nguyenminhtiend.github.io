!function(){"use strict";function t(t,e){e.hashPrefix(""),t.when("/",{redirectTo:"/dashboard"}).otherwise({redirectTo:"/"})}function e(t,e,n){t.$on("$locationChangeStart",function(t,e,n){}),t.$on("$routeChangeSuccess",function(){e.current.title?document.title="Ethoz - "+e.current.title:document.title="Ethoz"})}angular.module("main.module",["ngRoute","ui.bootstrap","ngMap","ngDraggable","ui.bootstrap.contextMenu","dashboard.module"]).config(t).run(e),t.$inject=["$routeProvider","$locationProvider"],e.$inject=["$rootScope","$route","$location"]}(),function(){"use strict";angular.module("main.module").constant("events",{RE_RENDER_CALENDAR:"RE_RENDER_CALENDAR"})}(),function(){"use strict";function t(t){t.when("/dashboard",{title:"Dashboard",controller:"DashboardController",templateUrl:"app/views/dashboard/dashboard.html",controllerAs:"vm"})}function e(t,e,n){function r(){o()}function i(t,e){for(var n=0;n<a.drivers.length;n++)for(var r=0;r<a.drivers[n].jobs.length;r++)a.drivers[n].jobs[r].id===t.id&&a.drivers[n].jobs.splice(r,1);for(var n=0;n<a.drivers.length;n++)a.drivers[n].id===e&&a.drivers[n].jobs.push(t);o()}function o(){for(var t=0;t<a.drivers.length;t++)for(var e=0;e<a.drivers[t].jobs.length;e++){var r=n.getPercentageFromDistance(a.drivers[t].jobs[e].startTime,a.drivers[t].jobs[e].endTime,a.startTime,a.sizeHour);a.drivers[t].jobs[e].style={width:r+"%",left:n.getPercentageFromDistance(a.startTime,a.drivers[t].jobs[e].startTime,a.startTime,a.sizeHour)+12.5+"%"},a.drivers[t].jobs[e].isDisplay=0!==r}}var a=this;a.reAssignDriver=i,a.timeChange=r,a.calendarViewMode=!1,a.status={completed:"completed",pending:"pending",unassign:"unassign"},a.onDragComplete=function(t,e){alert("Drag done: "+t)},a.drivers=[];for(var s=0;s<3;s++)a.drivers.push({id:s,name:"Driver "+s,jobs:[{id:s+"1",title:"Replacement",startTime:"9",endTime:"10",status:a.status.completed},{id:s+"2",title:"Replacement",startTime:"7",endTime:"8:30",status:a.status.pending},{id:s+"3",title:"Replacement",startTime:"11:30",endTime:"13:30",status:a.status.unassign}]});a.drivers.push({id:4,name:"Driver 4",jobs:[{id:"41",title:"On Leave Whole Day - 1 Job Assigned",startTime:"4",endTime:"20",status:a.status.unassign}]}),a.drivers.push({id:5,name:"Driver 5",jobs:[{id:"51",title:"MICE",startTime:"4",endTime:"20",status:a.status.pending}]}),a.startTime=7,a.sizeHour=6}angular.module("dashboard.module",["ngRoute"]).config(t).controller("DashboardController",e),t.$inject=["$routeProvider"],e.$inject=["events","$rootScope","timeService"]}(),function(){"use strict";function t(){}angular.module("main.module").component("headerPage",{bindings:{},templateUrl:"app/components/headerPage/headerPage.html",controller:t,controllerAs:"vm"}),t.$inject=[]}(),function(){"use strict";function t(t){function e(){if(o.isShowCurrentTime=t.isShowCurrentTime(o.startTime,o.sizeHour),o.isShowCurrentTime){var e=t.getPercentageFromDistance(o.startTime,t.getCurrentTime(),o.startTime,o.sizeHour)+12.5;o.currentTimeStyles={left:e-4+"%"},o.timeText=t.getCurrentTimeText()}}function n(){o.ranges=[],o.textHours=[];for(var t=0;t<o.sizeHour;t++)o.ranges.push(t+o.startTime),o.textHours.push(t+o.startTime);o.textHours.push(o.startTime+o.sizeHour)}function r(){o.startTime+=1,o.$onInit(),o.timeChange()}function i(){o.startTime-=1,o.$onInit(),o.timeChange()}var o=this;o.next=r,o.back=i,o.$onInit=function(){n(),e()}}angular.module("main.module").component("timeControl",{bindings:{startTime:"=",sizeHour:"<",timeChange:"&"},templateUrl:"app/components/dashboard/timeControl/timeControl.html",controller:t,controllerAs:"vm"}),t.$inject=["timeService"]}(),function(){"use strict";function t(t,e,n){function r(){s.draps=[];for(var t=s.startTime,e=0,n=2,r=t;r<s.startTime+s.sizeHour;r++)s.draps.push({style:{left:12.5*n/2+"%"},hour:r,minute:e}),n++,0!=e?30==e&&(e=0):(r--,e=30)}function i(){if(s.isShowCurrentTime=e.isShowCurrentTime(s.startTime,s.sizeHour),s.isShowCurrentTime){var t=e.getPercentageFromDistance(s.startTime,e.getCurrentTime(),s.startTime,s.sizeHour)+12.5;s.currentTimeStyles={left:t-4+"%"}}}function o(){i(),a()}function a(){for(var t=0;t<s.driver.jobs.length;t++){var n=e.getPercentageFromDistance(s.driver.jobs[t].startTime,s.driver.jobs[t].endTime,s.startTime,s.sizeHour);s.driver.jobs[t].style={width:n+"%",left:e.getPercentageFromDistance(s.startTime,s.driver.jobs[t].startTime,s.startTime,s.sizeHour)+12.5+"%"},s.driver.jobs[t].isDisplay=0!==n}}var s=this;s.$onInit=function(){i(),a(),r(),t.$watch("vm.startTime",o)},s.status={completed:"completed",pending:"pending",unassign:"unassign"},s.onDropComplete=function(t,e,n,r){if(t){var i=angular.copy(t),o=n.hour+":"+n.minute,a=n.hour+1+":"+n.minute;i.startTime=o,i.endTime=a,s.reAssignDriver({job:i,driverId:r})}},s.drapComplete=function(t){for(var e=0;e<s.driver.jobs.length;e++)if(s.driver.jobs[e].id===t)return s.driver.jobs.splice(e,1),void a()}}angular.module("main.module").component("driverChartTime",{bindings:{driver:"=",startTime:"=",sizeHour:"<",isTaskActive:"<",reAssignDriver:"&"},templateUrl:"app/components/dashboard/driverChartTime/driverChartTime.html",controller:t,controllerAs:"vm"}),t.$inject=["$scope","timeService","$timeout"]}(),function(){"use strict";function t(t,e){function n(t,e){r.currentJob=e,r.map.showInfoWindow("job-info",e.id)}var r=this;r.showDetail=n,r.$onInit=function(){t.getMap().then(function(t){r.map=t}),r.status={completed:"completed",pending:"pending",notstart:"notstart"},e(function(){r.jobs=[{id:"123",plateNo:"",address:"20 Ubi Avenue 4, Singapore",title:"Test Driver",status:r.status.notstart,driver:"Latif",label:{text:"Latif",color:"white",fontSize:"12px"}},{id:"633",plateNo:"SGR 1451 SDG 6496",address:"Ethoz Group Ltd., Tampines Street 92, Singapore",title:"Replacement",status:r.status.pending,label:{text:"Lisheng",color:"white",fontSize:"12px"}}]},2e3)},r.placeChanged=function(){r.place=this.getPlace(),r.map.setCenter(r.place.geometry.location)},r.click=function(){alert("6236236")},r.icon={url:"./img/driver.png"}}angular.module("main.module").component("jobOnMap",{bindings:{},templateUrl:"app/components/dashboard/jobOnMap/jobOnMap.html",controller:t,controllerAs:"vm"}),t.$inject=["NgMap","$timeout"]}(),function(){"use strict";function t(t){function e(){a.currentDate.setDate(a.currentDate.getDate()+1),r()}function n(){a.currentDate.setDate(a.currentDate.getDate()-1),r()}function r(){var e=i(a.currentDate)?"Today":t("date")(a.currentDate,"EEE");a.dateFormat=e+", "+o(a.currentDate.getDate())+" "+t("date")(a.currentDate,"MMM")+", "+a.currentDate.getFullYear()}function i(t){var e=new Date;return t.setHours(0,0,0,0)==e.setHours(0,0,0,0)}function o(t){return t%20==1||t%30==1?t+"st":t%20==2||t%30==2?t+"nd":t%20==3||t%30==3?t+"rd":t+"th"}var a=this;a.next=e,a.previous=n,a.$onInit=function(){a.currentDate=new Date,r()}}angular.module("main.module").component("dateControl",{bindings:{},templateUrl:"app/components/dashboard/dateControl/dateControl.html",controller:t,controllerAs:"vm"}),t.$inject=["$filter"]}(),function(){"use strict";function t(){var t=this;t.$onInit=function(){}}angular.module("main.module").component("filterDashboard",{bindings:{calendarViewMode:"="},templateUrl:"app/components/dashboard/filterDashboard/filterDashboard.html",controller:t,controllerAs:"vm"}),t.$inject=[]}(),function(){"use strict";function t(){var t=this;t.onDragComplete=function(e,n,r){t.todayJobs.splice(r,1)},t.$onInit=function(){t.status={completed:"completed",pending:"pending",unassign:"unassign"},t.todayJobs=[{id:"123",plateNo:"",address:"20 Ubi Avenue 4, Singapore",title:"Test Driver",status:t.status.unassign,driver:""},{id:"633",plateNo:"SGR 1451 SDG 6496",address:"Ethoz Group Ltd., Tampines Street 92, Singapore",title:"Replacement",status:t.status.pending,driver:"Razif"},{id:"3734",plateNo:"SGR 1451 SDG 6496",address:"Ethoz Group Ltd., Tampines Street 92, Singapore",title:"Replacement",status:t.status.completed,driver:"Meng"}]}}angular.module("main.module").component("jobTab",{bindings:{},templateUrl:"app/components/dashboard/jobTab/jobTab.html",controller:t,controllerAs:"vm"}),t.$inject=[]}(),function(){"use strict";function t(t){var e=this;e.status={completed:"completed",pending:"pending",unassign:"unassign"},e.$onInit=function(){e.menuOptions=[["Set duration",function(t,e,n,r,i){alert("Set duration")}],null,["Add task",function(t,e,n,r,i){alert("Add task")}],null,["Add petrol card",function(t,e,n,r,i){alert("Add petrol card")}]],e.dynamicPopover={content:"Hello, World!",templateUrl:"myPopoverTemplate.html",title:"Title"}}}angular.module("main.module").component("jobCell",{bindings:{job:"=",isTaskActive:"<"},templateUrl:"app/components/dashboard/jobCell/jobCell.html",controller:t,controllerAs:"vm"}),t.$inject=["$rootScope"]}(),function(){"use strict";function t(){var t=this;t.onDragComplete=function(e,n,r){t.tasks.splice(r,1)},t.$onInit=function(){t.status={completed:"completed",pending:"pending",unassign:"unassign"},t.tasks=[{id:"123",requestNo:"46943435",description:"Pick Lisheng up from 20 Ubi Avenue 4, Singapore. Contact 68203968",status:t.status.unassign,driver:""},{id:"633",requestNo:"46943435",description:"Pick Lisheng up from Ethoz Group Ltd., Tampines Street 92, Singapore. Contact 68203968",status:t.status.pending,driver:"Razif"},{id:"3734",requestNo:"46943435",description:"Pick Lisheng up from Ethoz Group Ltd., Tampines Street 92, Singapore. Contact 68203968",status:t.status.completed,driver:"Lisheng"}]}}angular.module("main.module").component("taskTab",{bindings:{},templateUrl:"app/components/dashboard/taskTab/taskTab.html",controller:t,controllerAs:"vm"}),t.$inject=[]}(),function(){"use strict";function t(t){function e(e){return t("orderBy")(e,function(t){return t.startTime},!1,r)}function n(t){var e=t.split(":"),n={hour:parseInt(e[0])};return n.minute=e.length>1?parseInt(e[1]):0,n}function r(t,e){if(!Number.isInteger(t.value)&&!Number.isInteger(e.value)){var r=n(t.value),i=n(e.value);return r.hour>i.hour||r.hour==i.hour&&r.minute>i.minute}}var i={sortByStartTime:e,getTimeObject:n};return i}angular.module("main.module").factory("utilityService",t),t.$inject=["$filter"]}(),function(){"use strict";function t(t){function e(t,e){var n=new Date,r=n.getHours(),i=n.getMinutes();return!(r<t||r>t+e||r===t+e&&i>0)}function n(t,e,n,i){var a=o(t.toString()),s=o(e),u=r(s,n,i)-r(a,n,i);return l*u/60}function r(t,e,n){var r=t.hour,i=t.minute;return r<e&&(r=e,i=0),(r>e+n||r===e+n&&i>0)&&(r=e+n,i=0),60*r+i}function i(e){return t("orderBy")(e,function(t){return t.startTime},!1,u)}function o(t){var e=t.split(":"),n={hour:parseInt(e[0])};return n.minute=e.length>1?parseInt(e[1]):0,n}function a(){var t=new Date;return t.getHours()+":"+t.getMinutes()}function s(){return t("date")(new Date,"h:mma")}function u(t,e){if(!Number.isInteger(t.value)&&!Number.isInteger(e.value)){var n=o(t.value),r=o(e.value);return n.hour>r.hour||n.hour==r.hour&&n.minute>r.minute}}var l=12.5,c={sortByStartTime:i,getTimeObject:o,getCurrentTime:a,getPercentageFromDistance:n,isShowCurrentTime:e,getCurrentTimeText:s};return c}angular.module("main.module").factory("timeService",t),t.$inject=["$filter"]}();